<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Exercise Javascript Game</title>
    <style>
      .container {
        height: 90vh;
        position: relative;
        background-color: dimgray;
        width: 90%;
        left: 5%;
        margin-top: 10px;
        overflow: hidden;
        /* Hide cursor */
        cursor: none;
      }

      .crossHair {
        /* enable to move it around */
        position: absolute;
        height: 100px;
        width: 100px;
        left: 10%;
        bottom: 10%;
        border: 1px solid black;
        border-radius: 50px;
        background-color: rgba(255, 255, 255, 0.1);
        z-index: 1000;
      }

      .crossInfo {
        position: absolute;
        height: 20%;
        width: 50%;
        margin-left: 25%;
        background-color: black;
        color: white;
        font-size: 0.6em;
        text-align: center;
        line-height: 20px;
        bottom: 0;
      }

      .btnStart {
        display: inline-block;
        padding: 15px;
        border: 1px solid black;
        background-color: red;
        color: white;
        font-size: 2em;
      }

      .baddy {
        position: absolute;
        top: 250px;
        left: 100px;
        width: 100px;
        height: 100px;
        padding: 4px;
        /* background-color: rgba(0, 0, 0, 0.1); */
        background-color: red;
        box-shadow: 0px 1px 8px 0px black;
        border-radius: 50px;
        text-align: center;
        z-index: 2;
      }
    </style>
  </head>
  <body>
    <div class="headerInfo">
      <div class="btnStart">Start</div>
      Score: <span class="score">0</span>
    </div>
    <div class="container">
      <div class="baddy"></div>
      <div class="crossHair">
        <div class="crossInfo"></div>
      </div>
    </div>
    <script>
      var score;
      // Boolean value, is game started alreay
      var gameplay;
      // Hold anomation frame
      var reqUpdate;

      // Grab element and move around with cursor
      var container = document.querySelector(".container");
      var crossHair = document.querySelector(".crossHair");
      var baddy = document.querySelector(".baddy");
      var btnStart = document.querySelector(".btnStart");

      btnStart.addEventListener("click", startGame);

      function startGame() {
        if (!gameplay) {
          score = 0;
          gameplay = true;

          reqUpdate = window.requestAnimationFrame(update);
        }
      }

      function update() {
        // console.log("Game in play");

        console.log(isCollision(crossHair, baddy));

        // gameplay loop
        if (!gameplay) {
          // Stop animation
          window.cancelAnimationFrame(reqUpdate);
        } else {
          reqUpdate = window.requestAnimationFrame(update);
        }
      }

      function isCollision(a, b) {
        var aRect = a.getBoundingClientRect();
        var bRect = b.getBoundingClientRect();

        //  console.log(aRect);
        //  console.log(bRect);

        // console.log(aRect.top);
        // console.log(aRect.height);
        // console.log(aRect.left);
        // console.log(aRect.width);

        return !(
          ((aRect.top + aRect.height) < bRect.top) ||
          (aRect.top >( bRect.top + bRect.height)) ||
          ((aRect.left + aRect.width) < bRect.left) ||
          (aRect.left > (bRect.left + bRect.width))
        );
      }

      // whenever we're in the container move crossHair arround
      container.addEventListener("mousemove", move, true);

      function move(e) {
        document.querySelector(".crossInfo").innerHTML =
          "X:" + (e.clientX - 70) + "Y:" + (e.clientY - 50);

        // Log full event
        // console.log(e);

        // Log x coordinates
        // console.log(e.clientX);

        // Log y coordinates
        // console.log(e.clientY);

        // -100 because we set default size of element in CSS above
        crossHair.style.top = e.clientY - 100 + "px";

        // -140 because we set default size of element in CSS above (40) to set cursor on center
        crossHair.style.left = e.clientX - 140 + "px";
      }
    </script>
  </body>
</html>
